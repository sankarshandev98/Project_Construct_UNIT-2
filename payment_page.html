<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Information-HeadphoneZone-Checkout</title>
    <link rel="stylesheet" href="payment.css" />
    <style>
      #del{
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="parent">
      <div id="head_logo">
        <img
          src="https://cdn.grabon.in/gograbon/images/merchant/1619506977243/headphone-zone-logo.jpg"
        />
        <p>Cart > <b>Information ></b> Payment</p>
        <div id="contact">
          <h3>Contact information</h3>
          <img
            src="https://www.linkpicture.com/q/Screenshot-2022-06-16-235950.png"
            type="image"
          />

          <!-- if required input here name and logout here hardcode it -->
          <br />
          <input type="checkbox" />Email and WhatsApp me with news and offers
        </div>

        <div id="GST">
          <div id="item-1">
            <p>
              GST details: &nbsp; &nbsp; Is your organisation registered under
              GST ACT in India?
            </p>
          </div>
          <div id="item-2" style="background-color: white">
            <input type="radio" />&nbsp; Yes, registered under GST ACT &nbsp;
            &nbsp; &nbsp; &nbsp;<input type="radio" /> No, not registered under
            GST ACT.
          </div>
          <div id="item-3">
            Please enter your GST number now. Once order has been placed, no
            modifications can be made to add your GST number to the invoice.
          </div>
        </div>
        <h2>Shipping Address</h2>
        <form>
          <div id="item-1">
            <select name="country">
              <option value="" disabled selected hidden>
                Choose Country/Region...
              </option>
              <option>India</option>
              <option>United States Of America</option>
              <option>France</option>
              <option>Russia</option>
              <option>Nepal</option>
              <option>China</option>
              <option>Japan</option>
              <option>Brazil</option>
            </select>
          </div>
          <div id="item-2">
            <input
              type="text"
              name="first_name"
              placeholder="First Name"
              style="font-size: 15px"
            />
          </div>
          <div id="item-3">
            <input
              type="text"
              name="last_name"
              placeholder="Last Name"
              style="font-size: 15px"
            />
          </div>
          <div id="item-4">
            <input
              type="text"
              name="address"
              placeholder="Address"
              style="font-size: 15px"
            />
          </div>
          <div id="item-5">
            <input
              type="text"
              name="city"
              placeholder="City"
              style="font-size: 15px"
            />
          </div>
          <div id="item-6">
            <input
              type="text"
              name="state"
              placeholder="State"
              style="font-size: 15px"
            />
          </div>
          <div id="item-7">
            <input
              type="number"
              name="pincode"
              placeholder="PINCODE"
              style="font-size: 15px"
            />
          </div>
          <div id="item-8">
            <input
              type="number"
              name="phone"
              placeholder="Phone"
              style="font-size: 15px"
            />
          </div>
          <div id="item-9">
            <button type="submit" name="submit" id="final">
              Continue to payment Method
            </button>
          </div>
        </form>
        <div id="last-sec">
          <p>
            <b
              >Cash on Delivery is currently not available to ensure COVID-19
              safety protocols.</b
            >
          </p>
          <hr />
          <p>
            Refund Policy &nbsp; &nbsp; Privacy policy &nbsp;&nbsp; Terms of
            service &nbsp; &nbsp; <p id="del">Delivery Details</p>
          </p>
        </div>
      </div>
      <div id="right">
        <h1>TOTAL</h1>
        <span id="total"></span>
        <div id="container">
          <div>
            <table>
              <tbody>
                <!-- append cart products -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<script>
  let data = JSON.parse(localStorage.getItem("cartLSS"));
  let total = 0;
  displayCart(data);

  function displayCart(data) {
    data.map(function (elem, index) {
      // quantity adding and reducing for add quantity
      document.querySelector("tbody").innerHtml = "";
      elem.quantity = 1;

      // table data first ------->
      let tr = document.createElement("tr");
      let td1 = document.createElement("td");
      let divm = document.createElement("div");
      divm.setAttribute("id", "td1");
      let divc1 = document.createElement("div");
      let img = document.createElement("img");

      // my changes
      img.setAttribute("id", "prod_img");

      img.src = elem.image_url;
      let divc2 = document.createElement("div");
      let anchor = document.createElement("a");
      let span = document.createElement("span");
      span.innerText = "Black";
      anchor.innerText = elem.name;
      anchor.setAttribute("href", elem.image_url);
      let divcsub = document.createElement("div");
      let sprice = document.createElement("span");
      divcsub.setAttribute("id", "sprice");
      sprice = "₹" + elem.price;
      divcsub.append(sprice);
      divc2.append(anchor, span, divcsub);
      divc1.append(img);
      divm.append(divc1, divc2);
      td1.append(divm);
      // table data second ------->
      let td2 = document.createElement("td");
      let divm2 = document.createElement("div");
      divm2.setAttribute("id", "td2");
      let minus = document.createElement("button");
      minus.setAttribute("id", "dec");
      minus.addEventListener("click", function () {
        reducing(elem);

        if (elem.quantity >= 1) {
          squantity.innerText = elem.quantity;
          p.innerText = "₹" + elem.price * elem.quantity;
        } else {
          squantity.innerText = 1;
        }
      });
      minus.innerText = "-";
      let squantity = document.createElement("span");
      squantity.innerText = 1;
      squantity.setAttribute('id', 'squan');
      let plus = document.createElement("button");
      plus.setAttribute("id", "inc");
      plus.addEventListener("click", function () {
        adding(elem);

        if (elem.quantity > 1) {
          squantity.innerText = elem.quantity;
          p.innerText = "₹" + elem.price * elem.quantity;
        } else {
          squantity.innerText = 1;
        }
      });
      plus.innerText = "+";
      let removed = document.createElement("button");
      removed.setAttribute("id", "btn");
      removed.innerText = "Remove";
      removed.addEventListener("click", function () {
        elemRemove(index);
      });
      divm2.append(minus, squantity, plus);
      td2.append(divm2, removed);
      // table data third ------->

      let td3 = document.createElement("td");
      let p = document.createElement("p");
      td3.append(p);
      p.innerText = "₹" + elem.price;

      tr.append(td1, td2, td3);
      document.querySelector("tbody").append(tr);
    });
  }
  data.map(function (element) {
    total += element.price;
  });

  function reducing(elem) {
    event.preventDefault();
    for (let i = 0; i < data.length; i++) {
      if (elem == data[i] && elem.quantity > 1) {
        elem.quantity--;
        total -= elem.price;
        document.querySelector("#total").innerHTML = "₹" + total;
      }
    }
  }
  function adding(elem) {
    event.preventDefault();
    for (let i = 0; i < data.length; i++) {
      if (elem == data[i]) {
        elem.quantity++;
        total += elem.price;
        document.querySelector("#total").innerHTML = "₹" + total;
      }
    }
  }
  function elemRemove(index) {
    event.preventDefault();
    data.splice(index, 1);
    localStorage.setItem("cartLSS", JSON.stringify(data));
    displayCart(data);
    window.location.href = "cart.html";
  }
  // checkout all item price total
  document.querySelector("#total").innerHTML = "₹" + total;
  document.querySelector("#final").addEventListener("click", goToPayment);
  function goToPayment(event) {
    event.preventDefault();
    alert("Item placed Successfully");
    // window.location.href = "index.html";

  }
  document.querySelector("#del").addEventListener("click", goTodel);
  function goTodel(){
    window.location.href='DELIVERY_ADDRESS.html';
  }
</script>
